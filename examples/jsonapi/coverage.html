<html>
<body>
<script src="../../node_modules/traceur/bin/traceur.js"></script>
<script src="../../node_modules/es6-module-loader/dist/es6-module-loader.js"></script>

<script src="../../dist/spec-verify-browser.js"></script>
<script>
  System.paths['assertion-context'] = '/spec-verify/src/assertion-context.js';
  System.paths['should'] = '/spec-verify/node_modules/should/should.js';

  System.import('./assertions').then(function(module) {
    var allAssertions = SpecVerify.flattenAssertions(module.rootAssertions);

    var specReq = new XMLHttpRequest();
    specReq.onload = function() {
      var result = SpecVerify.TextCoverageHighlighter(allAssertions, this.responseText);
      document.write(SpecVerify.highlightedMarkdownToHtml(result.marked));
      console.log(result.unmatched.length + ' Unmatched assertions out of ' + allAssertions.length + ' : ');
      result.unmatched.forEach(function (ua) {
        console.log(ua.description);
      });
      console.log('Coverage: ' + result.coveragePercent + ' %');
    };
    specReq.open('get', module.spec, true);
    specReq.send();
  });
</script>
</body>
</html>